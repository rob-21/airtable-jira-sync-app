# .env

# --- SCRIPT BEHAVIOR & FEATURE FLAGS ---
DRY_RUN="True"                 # "True" for QA (no writes), "False" for live.
SCRIPT_DEBUG_MODE="False"      # "True" for verbose DEBUG logging, "False" for INFO.

ENABLE_PHASE1_JIRA_TO_AIRTABLE="True"    # Process new Jira issues to Airtable.
ENABLE_PHASE2_AIRTABLE_TO_JIRA="True"    # Process new/updated Airtable records to Jira.
ENABLE_PHASE3_TWO_WAY_SYNC="False"       # Enable full two-way sync for matched items.
ENABLE_SPRINT_MANAGEMENT_IN_PHASE3="False" # Enable sprint creation/assignment in Phase 3.
ENABLE_TWO_WAY_COMMENT_SYNC="False"      # Feature flag for comment sync (keep False for now).
# ENABLE_JIRA_FIELD_SYNC_FROM_AIRTABLE="True" # Controlled within Phase 3 logic
# ENABLE_AIRTABLE_FIELD_SYNC_FROM_JIRA="True" # Controlled within Phase 3 logic

# --- AIRTABLE GENERAL CONFIGURATION ---
AIRTABLE_PERSONAL_ACCESS_TOKEN="patEV24OTGco45jO4.9f6547eb6bdb07afc522472706679125c787c3209f32ed47f38f38e5c22cd5cf" # Airtable Personal Access Token
AIRTABLE_BASE_ID="appuFoVscx6IDZLNh"                             # The ID of your Airtable Base
AIRTABLE_TABLE_NAME="tblJhtToEXxeiLQBt"             # Name or ID of your main Airtable table for CRO items

# --- AIRTABLE FIELD NAMES IN YOUR MAIN CRO TABLE ---
# Primary & Matching Fields
AIRTABLE_HEADLINE_FIELD_NAME="Full Name"                  # Field used for Jira Summary, and main display name in Airtable.
AIRTABLE_STATUS_FIELD_NAME="Status"                       # Field representing the item's status (e.g., "Idea: Evaluated").
AIRTABLE_EXPERIMENT_ID_FIELD_NAME="Experiment WxxTxx ID"  # Field for 'WxxTxxx' ID string.
AIRTABLE_TEST_ID_FIELD_NAME="Test ID"                     # Field for the numeric 'Test ID'.
AIRTABLE_JIRA_KEY_FIELD_NAME="Jira Key"                   # CRITICAL: Field to store the linked Jira Issue Key (e.g., POR-123).
AIRTABLE_JIRA_URL_FIELD_NAME="Jira link"                  # Field to store the full URL to the Jira issue.
# Fields for Jira Description Table Content
AIRTABLE_OBSERVATION_FIELD="Observation"
AIRTABLE_IDEA_FIELD="Idea"                                # Or "Idea (description)" if that's the field name
AIRTABLE_HYPOTHESIS_FIELD="Hypothesis"
AIRTABLE_COUNTRY_FIELD="Site"                             # This field stores the ISO code (e.g., BE, RO).
AIRTABLE_PAGE_TYPE_FIELD="Page type"
AIRTABLE_PRIMARY_METRIC_FIELD="Primary metric (goal)"
AIRTABLE_SECONDARY_METRICS_FIELD="Secondary Metrics"      # Or "Additional Metrics"
AIRTABLE_PLATFORM_FIELD="Platform"
AIRTABLE_DEVICE_FIELD="Device"
AIRTABLE_VAIMO_COMMENTS_FIELD="Nobi comments"
AIRTABLE_SPONSOR_COMMENTS_FIELD="Sponsor comments"        # Text field for aggregated sponsor comments.
AIRTABLE_OTHER_COMMENTS_FIELD="Other comments"
AIRTABLE_TODO_NEEDED_FIELD="To do/needed"
AIRTABLE_HOW_TO_QA_FIELD="How to QA"
AIRTABLE_TYPE_OF_TEST_FIELD="Type of Test"
# Date Fields
AIRTABLE_PLANNED_START_DATE_FIELD="Planned start date"
AIRTABLE_ESTIMATED_END_DATE_FIELD="Estimated end date"
# Field for 'Goal' to 'Cluster' mapping
AIRTABLE_GOAL_FIELD="Goal"
# Fields for Comment Sync (for future use)
# AIRTABLE_LAST_SYNCED_JIRA_COMMENT_TIMESTAMP_FIELD="Last Synced Jira Comment Timestamp"
# AIRTABLE_LAST_SYNCED_AIRTABLE_COMMENT_TIMESTAMP_FIELD="Last Synced Airtable Comment Timestamp"

# --- AIRTABLE DATA FETCHING CRITERIA ---
# Status value in AIRTABLE_STATUS_FIELD_NAME to fetch for initial creation in Jira (Phase 2)
AIRTABLE_STATUSES_FOR_JIRA_CREATION="Idea: Evaluated,Idea: Planning,Deploy: Design/Configure/Dev,Build: QA,Monitor,Learn: Analysis>Recs>Act" # Comma-separated if multiple: "Idea: Evaluated,Idea: Planning"
 
# Statuses that trigger sync if item already exists or for first-time bulk import (Phase 3 / part of Phase 2)
AIRTABLE_STATUSES_FOR_SYNC="Idea: Evaluated,Idea: Planning,Deploy: Design/Configure/Dev,Build: QA,Monitor,Learn: Analysis>Recs>Act" # Comma-separated if multiple: "Idea: Evaluated,Idea: Planning"
 

# --- JIRA CONFIGURATION ---
JIRA_SERVER_URL="https://jira-eu-aholddelhaize.atlassian.net"
JIRA_USERNAME="rdiaconeasa@delhaize.be"
JIRA_API_TOKEN="ATATT3xFfGF002WIV_LnbNLqGFzVUKV1tbLyKnLarVGp4zq5-pdxG3mcz5WlycRmpCJcgiJnBeb0KdBfzeTnXVU8N1I7gjFcxWhkKGpjkGKcxZcL0j5WGmMXt42JUq3DgS2mRJl3QZcLYVxQJNnaOBkZBvU0X3qC64hVLFTBNZkrF0fR1b4waIs=1150D961"
JIRA_PROJECT_KEY="POR"                                  # Your "POR" project key.
JIRA_ISSUE_TYPE_NAME="CRO"                              # Assuming "CRO" is an issue type. If not, use 'Task' or appropriate.
JIRA_CRO_INTAKE_FORM_ISSUE_KEY="POR-15917"              # Key of the 'CRO Item [INTAKE FORM]' template.
JIRA_CRO_PLANNING_LABEL="CRO_Wave_Planning"             # Label for identifying relevant CRO issues.
JIRA_NEW_CRO_ISSUE_INITIAL_STATUS="Backlog"             # Status to set for new Jira CRO issues created by Phase 1.
JIRA_NOT_EVALUATED_PREFIX="[NOT EVALUATED]"             # Prefix for new Jira issues from Phase 1.
JIRA_LINK_TYPE_FOR_EXISTING_ISSUE="Relates to"          # (Already had this, for linking to other Jira issues if specified in Airtable)

# Fields for mapping Airtable data to specific Jira fields (besides description)
JIRA_CLUSTER_CUSTOM_FIELD="Cluster"                     # Name or ID (e.g., customfield_ABCDE) of the "Cluster" field in Jira.
JIRA_AFFECTED_COUNTRY_CUSTOM_FIELD="Affected Country"   # Name or ID of the "Affected Country" field in Jira.
JIRA_REQUIRED_DATE_CUSTOM_FIELD="Required Date Of Delivery" # Name or ID of this date field in Jira.
JIRA_DUE_DATE_CUSTOM_FIELD="Due Date"                   # Standard Jira field is 'duedate'. Use custom field name/ID if different.

# --- AIRTABLE LINKED RECORD CONFIGURATIONS (for resolving IDs to names/emails) ---
# These tell the script how to get display values if a field in your main table is a "Link to another record".

# For User fields (Sponsor, PM, Extra Stakeholders in main CRO table)
# The script will use these settings to fetch emails from the linked user records.
AIRTABLE_USERS_TABLE_NAME_OR_ID="tbl6fPTBoBBxTTQJd"      # Name or ID of your "Users" or "Team" table.
AIRTABLE_USERS_EMAIL_FIELD_NAME="Email"                  # Field name in that "Users" table containing the email.

# For "Site" field (which stores ISO codes like BE, RO in your main CRO table, but links to a "Sites" table)
AIRTABLE_SITE_FIELD_IS_LINKED="True"
AIRTABLE_SITE_LINKED_TABLE_NAME_OR_ID="tblDjHTYKj5XGzZdU"# Name or ID of the "Sites" table.
AIRTABLE_SITE_DISPLAY_FIELD_NAME="Name"                  # Field in "Sites" table that has the ISO code (e.g., BE). (The script will then map this ISO to full name for Jira's "Affected Country")

# For "Page type" field
AIRTABLE_PAGE_TYPE_FIELD_IS_LINKED="True"
AIRTABLE_PAGE_TYPE_LINKED_TABLE_NAME_OR_ID="tblAdCpHEnJ54cT8e"
AIRTABLE_PAGE_TYPE_DISPLAY_FIELD_NAME="Name"             # Field in "Page Types" table with the display name.

# For "Primary metric (goal)" field
AIRTABLE_PRIMARY_METRIC_FIELD_IS_LINKED="True"
AIRTABLE_PRIMARY_METRIC_LINKED_TABLE_NAME_OR_ID="tblbTqsheK7a2XeXD"
AIRTABLE_PRIMARY_METRIC_DISPLAY_FIELD_NAME="Name"        # Field in "Metrics" table with the display name.

# For "Platform" field
AIRTABLE_PLATFORM_FIELD_IS_LINKED="False"                # Set to False if it's a direct multi-select/text field in main table
AIRTABLE_PLATFORM_LINKED_TABLE_NAME_OR_ID="tblPlatformsTableID" # Only if IS_LINKED is True
AIRTABLE_PLATFORM_DISPLAY_FIELD_NAME="Name"              # Only if IS_LINKED is True

# For "Goal" field (used for Jira "Cluster")
AIRTABLE_GOAL_FIELD_IS_LINKED="True"                     # Assuming "Goal" in main table is a link to another table
AIRTABLE_GOAL_LINKED_TABLE_NAME_OR_ID="tbl3Q6xwMKc0xas2n"
AIRTABLE_GOAL_DISPLAY_FIELD_NAME="CRO Topic"             # Field in "Goals" table with the display name for "Cluster"